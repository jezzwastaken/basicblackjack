<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blackjack Basic Strategy Trainer</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #1a1a1a; color: #f0f0f0; margin: 20px; }
        .container { max-width: 900px; margin: auto; padding: 25px; background-color: #333; border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.6); }
        h1 { text-align: center; color: #ffeb3b; margin-bottom: 20px; }
        .game-area { display: flex; flex-direction: column; gap: 20px; }

        /* Status Bar */
        .status-bar { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-radius: 8px; background-color: #444; font-size: 1.1em; }
        #balance { font-weight: bold; color: #4CAF50; }
        .bet-input-group { display: flex; gap: 10px; align-items: center; }
        .bet-input-group input { padding: 8px; border-radius: 5px; border: 1px solid #555; background-color: #f0f0f0; color: #333; width: 100px; box-sizing: border-box; }
        #resetBalance { background-color: #ff9800; color: #333; }
        #resetBalance:hover { background-color: #e68900; }

        /* Card Areas */
        .hand-display { background-color: #2c2c2c; padding: 20px; border-radius: 10px; }
        h2 { color: #007bff; margin-top: 0; }
        .hands-container { display: flex; gap: 20px; flex-wrap: wrap; }
        .player-hand-wrapper { border: 2px solid transparent; border-radius: 10px; padding: 10px; transition: border-color 0.3s; }
        .player-hand-wrapper.active-hand { border-color: #ffeb3b; }
        .cards { min-height: 80px; display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
        .card { width: 50px; height: 75px; background-color: #f0f0f0; color: #333; border: 1px solid #000; border-radius: 5px; display: flex; justify-content: center; align-items: center; font-size: 1.5em; font-weight: bold; box-shadow: 2px 2px 5px rgba(0,0,0,0.4); }
        .hidden-card { background-color: #b00000; color: white; border: 3px dashed #ffeb3b; font-size: 1.2em; }
        .card.A { color: #b00000; }

        /* Aksiyon Butonlarƒ± */
        .options { padding: 15px; border-radius: 8px; background-color: #444; display: flex; align-items: flex-start; gap: 20px; }
        
        .action-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 280px; }
        .action-grid button { padding: 12px 15px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: background-color 0.3s, opacity 0.3s; width: 100%; box-sizing: border-box; }
        
        .action-button { background-color: #4CAF50; color: white; }
        .action-button:hover:not(:disabled) { background-color: #45a049; }
        .action-button:disabled { background-color: #888; cursor: not-allowed; opacity: 0.6; }

        #dealButton { background-color: #ff9800; color: #333; width: 150px; padding: 12px; }
        #dealButton:hover:not(:disabled) { background-color: #e68900; }
        #dealButton:disabled { background-color: #888; cursor: not-allowed; opacity: 0.6; }

        /* Hint Button Styling */
        .hint-group { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100%; 
            margin-left: 10px;
        }
        #hintButton { 
            background-color: #007bff; 
            color: white; 
            border: none; 
            border-radius: 50%; 
            width: 50px; 
            height: 50px; 
            font-size: 1.5em; 
            cursor: pointer; 
            transition: background-color 0.3s;
        }
        #hintButton:hover:not(:disabled) { background-color: #0056b3; }
        .hint-text { 
            font-size: 0.9em; 
            margin-bottom: 5px; 
            color: #ffeb3b; 
            font-weight: bold; 
            text-align: center; 
        }

        /* Result and Hint Areas */
        #gameResult { margin-top: 15px; padding: 15px; border-radius: 8px; font-size: 1.1em; text-align: center; min-height: 40px; background-color: #555; }
        
        /* Action Feedback Styling */
        #actionFeedback { 
            margin-top: 0; 
            padding: 15px;
            background-color: #2c2c2c;
            border-radius: 8px;
            font-weight: bold; 
            font-size: 1.2em;
            text-align: center;
        }
        .correct { color: #4CAF50; }
        .wrong { color: #f44336; }
        
        .warning { color: red; }
        .success { color: #4CAF50; }
        .primary { color: #007bff; }
        .info { color: #ffeb3b; }
    </style>
</head>
<body>

<div class="container">
    <h1>‚ô†Ô∏è Blackjack Basic Strategy Trainer</h1>

    <div class="game-area">
        
        <div class="status-bar">
            <span>Balance: <span id="balance">1000</span> USD</span>
            <div class="bet-input-group">
                <label for="betInput">Bet:</label>
                <input type="number" id="betInput" value="10" min="1" max="1000">
                <button id="resetBalance">Reset Balance</button>
            </div>
        </div>

        <div class="hand-display">
            <h2>Dealer: Total: <span id="dealerTotal">?</span></h2>
            <div class="cards" id="dealerCards">
                </div>
        </div>

        <div class="hand-display">
            <h2 id="playerHandTitle">You</h2>
            <div class="hands-container" id="playerHandsContainer">
                </div>
        </div>
        
        <div id="actionFeedback"></div>

        <div class="options">
            <button id="dealButton">Start New Hand</button>

            <div class="action-grid">
                <button id="hitButton" class="action-button" disabled>Hit</button>
                <button id="standButton" class="action-button" disabled>Stand</button>
                <button id="doubleButton" class="action-button" disabled>Double</button>
                <button id="splitButton" class="action-button" disabled>Split</button>
            </div>

            <div class="hint-group">
                <span class="hint-text">Best Move</span>
                <button id="hintButton" disabled>üîî</button>
            </div>
        </div>

        <div id="gameResult">Press 'Start New Hand' to begin.</div>

    </div>
</div>

<script>
    // --- GAME SETTINGS AND BASIC STRATEGY DATA ---

    let deck = [];
    let dealerHand = [];
    let playerHands = []; // {cards: [], bet: 0, isDoubleDown: false, hasStood: false, initialTwoCards: false}
    let currentHandIndex = 0;
    let balance = 1000;
    let currentBet = 0;
    let gameActive = false;
    let playerHasSplit = false;
    
    // Card Ranks and Values
    const cardRanks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', 'T', 'T', 'T', 'T'];
    const cardValues = { '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, 'T': 10, 'A': 11 };

    // Basic Strategy Tables (Dealer S17)
    // H: Hit, S: Stand, D: Double, P: Split
    const hardHand = {
        '8': 'HHHHHHHHHH', '9': 'HDDDDHHHHH', '10': 'DDDDDDDDHH', '11': 'DDDDDDDDDH',
        '12': 'HHSSSHHHHH', '13': 'SSSSSHHHHH', '14': 'SSSSSHHHHH', '15': 'SSSSSHHHHH',
        '16': 'SSSSSHHHHH', '17': 'SSSSSSSSSS'
    };
    const softHand = {
        '13': 'HHHHDHHHHH', '14': 'HHHHDHHHHH', '15': 'HHHDDHHHHH', '16': 'HHHDDHHHHH',
        '17': 'HDDDDDHHHH', '18': 'SDDDDDSSHH', '19': 'SSSSSSSSSS', '20': 'SSSSSSSSSS'
    };
    const pairs = {
        'A': 'PPPPPPPPPP', 'T': 'SSSSSSSSSS', '9': 'PPPPPPSPSS', '8': 'PPPPPPPPPH',
        '7': 'PPPPPPPHHH', '6': 'PPPPPHHHHH', '5': 'DDDDDDDDHH', '4': 'HHHPHHHHHH',
        '3': 'PPPPPPPHHH', '2': 'PPPPPPPHHH'
    };

    // --- CORE GAME FUNCTIONS ---

    function createAndShuffleDeck() {
        deck = [];
        const suits = ['H', 'D', 'C', 'S']; 
        for (const suit of suits) {
            for (const rank of cardRanks) {
                deck.push(rank); 
            }
        }
        for (let i = deck.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [deck[i], deck[j]] = [deck[j], deck[i]];
        }
    }

    function drawCard() {
        if (deck.length < 10) { 
            createAndShuffleDeck();
        }
        return deck.pop();
    }
    
    /** Calculates the hand value and returns a string for Soft Totals (e.g., '17 / 7') */
    function getHandTotalDisplay(handCards) {
        let total = 0;
        let aceCount = 0;

        for (const card of handCards) {
            if (card === 'A') {
                aceCount++;
                total += 11;
            } else {
                total += cardValues[card];
            }
        }

        // Handle Aces
        let finalTotal = total;
        let finalAceCount = aceCount;
        while (finalTotal > 21 && finalAceCount > 0) {
            finalTotal -= 10;
            finalAceCount--;
        }
        
        // Check for Soft Hand
        if (aceCount > 0 && finalTotal <= 21 && finalAceCount > 0) {
             // If there's an Ace and the total is not a hard total (i.e. Ace still counts as 11)
            let softTotal = finalTotal;
            let hardTotal = softTotal - 10;
            return `${softTotal} / ${hardTotal}`;
        }

        return finalTotal.toString();
    }

    /** Calculates the final numeric value (treating Aces as 1 or 11, max 21) */
    function calculateHandValue(handCards) {
        let total = 0;
        let aceCount = 0;

        for (const card of handCards) {
            if (card === 'A') {
                aceCount++;
                total += 11;
            } else {
                total += cardValues[card];
            }
        }

        while (total > 21 && aceCount > 0) {
            total -= 10;
            aceCount--;
        }

        return total;
    }

    function renderPlayerHands() {
        const container = document.getElementById('playerHandsContainer');
        container.innerHTML = '';
        
        playerHands.forEach((handData, index) => {
            const handWrapper = document.createElement('div');
            handWrapper.className = `player-hand-wrapper ${index === currentHandIndex && !handData.hasStood ? 'active-hand' : ''}`;

            const handTitle = document.createElement('h3');
            let handTotalDisplay = getHandTotalDisplay(handData.cards);
            let totalValue = calculateHandValue(handData.cards);

            let titleText = `Hand ${index + 1}: Total: ${handTotalDisplay}`;
            
            if (totalValue > 21) {
                titleText = `Hand ${index + 1}: Total: ${totalValue} (BUST)`;
            } else if (handData.initialTwoCards && totalValue === 21) {
                titleText += ' (BLACKJACK!)';
            }
            
            handTitle.innerHTML = titleText;
            handWrapper.appendChild(handTitle);

            const cardsDiv = document.createElement('div');
            cardsDiv.className = 'cards';
            
            handData.cards.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.className = `card ${card === 'A' ? 'A' : ''}`;
                cardDiv.textContent = card;
                cardsDiv.appendChild(cardDiv);
            });
            
            handTitle.innerHTML += ` | Bet: ${handData.bet} USD`;

            handWrapper.appendChild(cardsDiv);
            container.appendChild(handWrapper);
        });

        document.getElementById('playerHandTitle').textContent = `You (${currentHandIndex < playerHands.length ? `Active Hand: ${currentHandIndex + 1} / ${playerHands.length}` : 'All Hands Played'})`;
    }

    function renderDealerCards(hideFirstCard = false) {
        const element = document.getElementById('dealerCards');
        element.innerHTML = '';
        dealerHand.forEach((card, index) => {
            let displayCard = card;
            let classList = "card";
            if (card === 'A') classList += ' A';

            if (hideFirstCard && index === 0) {
                displayCard = '‚ùì';
                classList += ' hidden-card';
            }

            const cardDiv = document.createElement('div');
            cardDiv.className = classList;
            cardDiv.textContent = displayCard;
            element.appendChild(cardDiv);
        });

        const totalValue = calculateHandValue(dealerHand);
        // Display only the up-card for the dealer if the hole card is hidden
        const dealerDisplayTotal = hideFirstCard && dealerHand.length > 0 ? dealerHand[1] : totalValue;
        document.getElementById('dealerTotal').textContent = dealerDisplayTotal;
    }

    // --- GAME FLOW MANAGEMENT ---

    function dealNewHand() {
        const betInput = document.getElementById('betInput');
        currentBet = parseInt(betInput.value);

        if (currentBet > balance || currentBet <= 0 || isNaN(currentBet)) {
            document.getElementById('gameResult').innerHTML = `<span class="warning">Invalid Bet! Check your balance and minimum bet (1 USD).</span>`;
            return;
        }

        balance -= currentBet;
        updateBalanceDisplay();
        dealerHand = [];
        playerHands = [];
        currentHandIndex = 0;
        gameActive = true;
        playerHasSplit = false;
        document.getElementById('actionFeedback').textContent = '';
        
        if (deck.length < 20) createAndShuffleDeck(); 

        // Initial Hand
        playerHands.push({
            cards: [drawCard(), drawCard()], 
            bet: currentBet, 
            isDoubleDown: false, 
            hasStood: false,
            initialTwoCards: true 
        });
        
        dealerHand.push(drawCard()); // Dealer Hidden Card
        dealerHand.push(drawCard()); // Dealer Up Card

        renderPlayerHands();
        renderDealerCards(true);
        document.getElementById('gameResult').textContent = 'Your Turn. Select your action.';

        const playerTotal = calculateHandValue(playerHands[0].cards);
        const dealerTotal = calculateHandValue(dealerHand);
        
        if (playerTotal === 21 || dealerTotal === 21) {
            endGame(true); // Immediate end game for Blackjack/Push
        } else {
            checkHandStatus(playerHands[0], true);
        }
    }

    function playerAction(action) {
        if (!gameActive || currentHandIndex >= playerHands.length) return;

        const currentHand = playerHands[currentHandIndex];
        // --- Strategy Check BEFORE action ---
        const bestHint = getHint(currentHand.cards, dealerHand[1], currentHand.cards.length === 2 && !playerHasSplit);
        const hintChar = getHintChar(bestHint);
        
        const playerActionText = formatResult(action.substring(0, 1).toUpperCase()); // H, S, D, P
        const isCorrect = (action.substring(0, 1).toUpperCase() === hintChar);

        document.getElementById('actionFeedback').innerHTML = `
            Best Move: <span class="${isCorrect ? 'correct' : 'wrong'}">${bestHint}</span>, 
            You: <span class="${isCorrect ? 'correct' : 'wrong'}">${playerActionText}</span> 
            <span class="${isCorrect ? 'correct' : 'wrong'}">(${isCorrect ? 'CORRECT ‚úÖ' : 'WRONG ‚ùå'})</span>
        `;
        // --- End Strategy Check ---
        
        // --- Action Logic ---
        if (action === 'split') {
            if (currentHand.cards.length === 2 && currentHand.cards[0] === currentHand.cards[1] && balance >= currentHand.bet) {
                handleSplit(currentHand);
            }
            return;
        }
        
        disableActionButtons();

        switch (action) {
            case 'hit':
                currentHand.cards.push(drawCard());
                currentHand.initialTwoCards = false; 
                renderPlayerHands();
                checkHandStatus(currentHand);
                break;
            case 'stand':
                currentHand.hasStood = true;
                nextHand();
                break;
            case 'double':
                if (currentHand.cards.length === 2 && balance >= currentHand.bet) {
                    balance -= currentHand.bet;
                    currentHand.bet *= 2;
                    currentHand.isDoubleDown = true;
                    currentHand.cards.push(drawCard()); 
                    currentHand.initialTwoCards = false;
                    updateBalanceDisplay();
                    renderPlayerHands();
                    currentHand.hasStood = true; 
                    checkHandStatus(currentHand); 
                } else {
                    enableActionButtons(currentHand);
                }
                break;
        }
    }

    function handleSplit(originalHand) {
        balance -= originalHand.bet; 
        updateBalanceDisplay();
        playerHasSplit = true;

        const card1 = originalHand.cards.shift(); 
        const card2 = originalHand.cards.shift(); 

        // Update Original Hand
        originalHand.cards = [card1, drawCard()];
        originalHand.isDoubleDown = false;
        originalHand.hasStood = false;
        originalHand.initialTwoCards = false;

        // New Second Hand
        playerHands.splice(currentHandIndex + 1, 0, {
            cards: [card2, drawCard()],
            bet: originalHand.bet,
            isDoubleDown: false,
            hasStood: false,
            initialTwoCards: false 
        });

        renderPlayerHands();
        document.getElementById('gameResult').textContent = `Hands split into Hand ${currentHandIndex + 1} and Hand ${currentHandIndex + 2}. Your turn for Hand ${currentHandIndex + 1}.`;
        
        // Special rule for split Aces: Stand immediately after one card
        if (card1 === 'A' && card2 === 'A') {
             originalHand.hasStood = true;
             playerHands[currentHandIndex + 1].hasStood = true;
             nextHand();
        } else {
            checkHandStatus(originalHand);
        }
    }

    function checkHandStatus(hand, isInitialDeal = false) {
        const total = calculateHandValue(hand.cards);
        
        if (total > 21) {
            hand.hasStood = true;
            renderPlayerHands();
            document.getElementById('gameResult').textContent = `Hand ${currentHandIndex + 1}: BUST (${total})!`;
            nextHand();
        } 
        else if (hand.isDoubleDown || hand.hasStood || total === 21) {
            hand.hasStood = true; // Force stand on 21
            renderPlayerHands();
            nextHand();
        }
        else {
            enableActionButtons(hand);
            document.getElementById('gameResult').textContent = `Hand ${currentHandIndex + 1}: Your Turn. Select your action.`;
        }
    }

    function nextHand() {
        currentHandIndex++;
        
        while (currentHandIndex < playerHands.length && playerHands[currentHandIndex].hasStood) {
            currentHandIndex++;
        }

        if (currentHandIndex < playerHands.length) {
            const nextHandData = playerHands[currentHandIndex];
            renderPlayerHands();
            
            enableActionButtons(nextHandData);
            document.getElementById('gameResult').textContent = `Hand ${currentHandIndex + 1}: Your Turn. Select your action.`;
        } else {
            dealerTurn();
        }
    }

    function dealerTurn() {
        let allHandsBust = playerHands.every(hand => calculateHandValue(hand.cards) > 21);
        
        if (allHandsBust) {
            document.getElementById('gameResult').innerHTML = `<span class="warning">All Hands Busted. Dealer Wins.</span>`;
            endGame(false);
            return;
        }
        
        renderDealerCards(false); 
        document.getElementById('gameResult').textContent = 'Dealer is Playing...';

        let dealerTotal = calculateHandValue(dealerHand);

        while (dealerTotal < 17) {
            dealerHand.push(drawCard());
            renderDealerCards(false);
            dealerTotal = calculateHandValue(dealerHand);
        }
        
        setTimeout(() => {
            endGame(false);
        }, 1500); 
    }

    /** Processes the results for all hands. */
    function endGame(isImmediate) {
        gameActive = false;
        disableActionButtons();
        
        const dealerTotal = calculateHandValue(dealerHand);
        let finalMessage = "<h3>Game Results:</h3>";
        let totalWinnings = 0;

        playerHands.forEach((handData, index) => {
            const playerTotal = calculateHandValue(handData.cards);
            let result = '';
            let winnings = 0;
            const originalBet = handData.bet;

            if (playerTotal > 21) {
                result = 'BUST';
            } else if (isImmediate) {
                // Immediate check for the first hand (single hand game)
                const dealerBJ = dealerTotal === 21;
                const playerBJ = playerTotal === 21 && handData.initialTwoCards;

                if (playerBJ && dealerBJ) {
                    result = 'PUSH';
                    winnings = originalBet * 1; 
                } else if (playerBJ) {
                    result = 'BLACKJACK';
                    winnings = originalBet * 2.5; 
                } else if (dealerBJ) {
                    result = 'DEALER BLACKJACK';
                }
            }
            
            if (result === '') {
                 // Standard check (after dealer plays)
                 if (dealerTotal > 21) {
                    result = 'DEALER BUST';
                    winnings = originalBet * 2;
                } else if (playerTotal > dealerTotal) {
                    result = 'WIN';
                    winnings = originalBet * 2;
                } else if (playerTotal < dealerTotal) {
                    result = 'LOSE';
                } else {
                    result = 'PUSH';
                    winnings = originalBet * 1; 
                }
            }
            
            totalWinnings += winnings;
            const netChange = winnings - originalBet;

            // Only display results for hands that were played (not those skipped by immediate BJ)
            if (isImmediate && index > 0) return; 

            finalMessage += `
                <p>Hand ${index + 1} (Total: ${getHandTotalDisplay(handData.cards)}, Bet: ${originalBet} USD): 
                ${result === 'WIN' || result === 'DEALER BUST' || result === 'BLACKJACK' ? 
                `<span class="success">${result} (+${netChange.toFixed(0)} USD)</span>` : 
                result === 'PUSH' ? `<span class="info">${result} (0 USD)</span>` : 
                `<span class="warning">${result} (-${originalBet.toFixed(0)} USD)</span>`}
                </p>`;
        });
        
        balance += totalWinnings;
        updateBalanceDisplay();

        const totalBet = playerHands.reduce((sum, h) => sum + h.bet, 0);
        const totalNetChange = totalWinnings - totalBet;
        finalMessage += `<hr><p><strong>Total Balance Change:</strong> ${totalNetChange >= 0 ? `<span class="success">+${totalNetChange.toFixed(0)} USD</span>` : `<span class="warning">${totalNetChange.toFixed(0)} USD</span>`}</p>`;

        document.getElementById('gameResult').innerHTML = finalMessage;
        document.getElementById('dealButton').disabled = false;
        renderDealerCards(false); 
        document.getElementById('actionFeedback').textContent = ''; // Clear action feedback after game ends
    }

    // --- BASIC STRATEGY HINT FUNCTIONS ---
    
    function getDealerIndex(card) {
        if (card === 'A') return 9;
        if (card === 'T') return 8;
        return parseInt(card) - 2;
    }

    /** Returns the full action name (e.g., 'Hit (H)') based on Basic Strategy. */
    function getHint(handCards, dealerCard, isInitialTwoCards) {
        const total = calculateHandValue(handCards);
        const dealerIndex = getDealerIndex(dealerCard);
        let hintChar = '';
        let aceCount = handCards.filter(c => c === 'A').length;

        // 1. Split Check 
        if (isInitialTwoCards && handCards[0] === handCards[1]) {
            hintChar = pairs[handCards[0]][dealerIndex];
        }
        // 2. Soft Hand Check 
        else if (aceCount > 0 && total <= 21 && (total - 10) >= 2) {
            hintChar = softHand[total.toString()][dealerIndex];
        }
        // 3. Hard Hand Check
        else {
            if (total >= 8 && total <= 17) {
                hintChar = hardHand[total.toString()][dealerIndex];
            } else if (total > 17) {
                hintChar = 'S'; 
            } else {
                hintChar = 'H'; // Hard 5-7 is always Hit
            }
        }
        
        // Adjust for post-initial-two-card rules
        if (!isInitialTwoCards) {
             // Double and Split are replaced by Hit when the hand is not the initial two cards
             if (hintChar === 'D' || hintChar === 'P') {
                // Find the Hard total for substitute (e.g., Soft 17 becomes Hard 7)
                let substituteTotal = total;
                if (aceCount > 0 && total > 11) substituteTotal -= 10;
                
                if (substituteTotal >= 8 && substituteTotal <= 17) {
                    hintChar = hardHand[substituteTotal.toString()][dealerIndex];
                    if (hintChar === 'D') hintChar = 'H'; // If it was double on Hard, now it's Hit
                } else if (total > 17) {
                    hintChar = 'S';
                } else {
                    hintChar = 'H';
                }
             }
        }

        return formatResult(hintChar);
    }
    
    /** Returns only the character (H, S, D, P) for comparison */
    function getHintChar(formattedHint) {
        const match = formattedHint.match(/\(([^)]+)\)/);
        return match ? match[1] : ''; // Extracts the character (H, S, D, P)
    }

    /** Converts the char to the full action name and character in parentheses */
    function formatResult(char) {
        switch (char) {
            case 'H': return "Hit (H)";
            case 'S': return "Stand (S)";
            case 'D': return "Double (D)";
            case 'P': return "Split (P)";
            default: return "Stand (S)"; 
        }
    }

    // --- UI/BUTTON FUNCTIONS ---
    
    function updateBalanceDisplay() {
        document.getElementById('balance').textContent = balance.toFixed(0);
    }
    
    function enableActionButtons(handData) {
        const total = calculateHandValue(handData.cards);
        
        document.getElementById('hitButton').disabled = total >= 21;
        document.getElementById('standButton').disabled = false;
        document.getElementById('hintButton').disabled = false;
        document.getElementById('dealButton').disabled = true;

        const isInitialTwoCards = handData.cards.length === 2;
        
        // Double: Only allowed on initial two cards (of the current hand) AND if balance is sufficient.
        const canDouble = isInitialTwoCards && balance >= handData.bet && !handData.isDoubleDown;
        document.getElementById('doubleButton').disabled = !canDouble;

        // Split: Only allowed on initial two cards (of the current hand) AND same value AND balance is sufficient.
        const canSplit = isInitialTwoCards && handData.cards[0] === handData.cards[1] && balance >= handData.bet;
        document.getElementById('splitButton').disabled = !canSplit;
    }

    function disableActionButtons() {
        document.getElementById('hitButton').disabled = true;
        document.getElementById('standButton').disabled = true;
        document.getElementById('doubleButton').disabled = true;
        document.getElementById('splitButton').disabled = true;
        document.getElementById('hintButton').disabled = true;
        document.getElementById('dealButton').disabled = true;
    }

    // --- EVENT LISTENERS ---
    
    document.getElementById('dealButton').addEventListener('click', dealNewHand);
    document.getElementById('hitButton').addEventListener('click', () => playerAction('hit'));
    document.getElementById('standButton').addEventListener('click', () => playerAction('stand'));
    document.getElementById('doubleButton').addEventListener('click', () => playerAction('double'));
    document.getElementById('splitButton').addEventListener('click', () => playerAction('split'));
    
    document.getElementById('hintButton').addEventListener('click', () => {
        if (!gameActive || currentHandIndex >= playerHands.length) return;
        
        const currentHand = playerHands[currentHandIndex];
        const dealerCard = dealerHand[1];
        const isInitialTwo = currentHand.cards.length === 2 && !playerHasSplit;
        const hint = getHint(currentHand.cards, dealerCard, isInitialTwo);
        
        document.getElementById('actionFeedback').innerHTML = `Best Move: <span class="primary">${hint}</span>`;
    });
    
    document.getElementById('resetBalance').addEventListener('click', () => {
        balance = 1000;
        updateBalanceDisplay();
        document.getElementById('gameResult').innerHTML = '<span class="success">Balance reset to 1000 USD. Start a new hand.</span>';
        disableActionButtons();
        document.getElementById('dealButton').disabled = false;
        document.getElementById('actionFeedback').textContent = '';
    });

    // Initial Setup
    createAndShuffleDeck();
    updateBalanceDisplay();
    disableActionButtons();
    document.getElementById('dealButton').disabled = false; 

</script>

</body>
</html>



https://github.com/jezzwastaken/
